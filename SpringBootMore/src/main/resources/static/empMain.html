
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>EmpMain</title>
</head>
<body>
<h1>Emp Main</h1>
	<button id = "btnEmpDetail">Emp 상세</button>
	<button id = "btnEmpList">Emp 목록</button>
	<button id = "btnEmpInsert">Emp 등록</button>
	<button id = "btnEmpUpdate">Emp 수정</button>
	<button id = "btnEmpDelete">Emp 삭제</button>
	
	<button id = "btnEmpInsertJson">Emp json 등록</button>


<script>
	window.onload = function(){

	       let empUpdateData = new URLSearchParams({
	    	   studentId:4,
	    	   studentNm:'su',
	            email:'su@suuu.com',
	            phone:'010-3345-6373'
	        });
	       let empInsertData = new URLSearchParams({
	    	   studentId:4,
	    	   studentNm:'su',
	            email:'sa2@gildong.com',
	            phone:'010-3345-6373'
	        });
	       
	       
		document.querySelector("#btnEmpDetail").onclick = async function(){
			alert(1);
			//비동기 요청
			try{
				let response = await fetch('/students/2');
				let data = await response.json();
				
				//data로 이후 비동기 처리
				console.log(data);
			}catch(error){
				console.error(error);
			}
		}
		document.querySelector("#btnEmpList").onclick = async function(){
			alert(1);
			//비동기 요청
			try{
				let response = await fetch('/students');
				let data = await response.json();
				
				//data로 이후 비동기 처리
				console.log(data);
			}catch(error){
				console.error(error);
			}
		}
		
		document.querySelector("#btnEmpInsert").onclick = async function(){
			alert(1);
			//비동기 요청
			//post로 전송할 데이터 준비
			//post 전송 www-urlencoded
			let urlParams = new URLSearchParams({
		    	   studentId:4,
		    	   studentNm:'su',
		            email:'sa2@gildong.com',
		            phone:'010-3345-6373'
			});
			
			let fecthOptions={
					method:'POST',
					body:urlParams
			}
			
			try{
				let response = await fetch('/students',fecthOptions);
				let data = await response.json();
				
				//data로 이후 비동기 처리
				console.log(data);
			}catch(error){
				console.error(error);
			}
		}
		document.querySelector("#btnEmpInsertJson").onclick = async function(){
			alert(1);
			//비동기 요청
			//post로 전송할 데이터 준비
			//post 전송 www-urlencoded
			let fecthOptions={
					method:'POST',
					headers: {
						'Content-Type':'application/json'
					},
					body: JSON.stringify(empInsertData)
			}
			
			try{
				let response = await fetch('/empInsertJSON',fecthOptions);
				let data = await response.json();
				
				//data로 이후 비동기 처리
				console.log(data);
			}catch(error){
				console.error(error);
			}
		}
		
		       
		       
		document.querySelector("#btnEmpUpdate").onclick = async function(){
			alert(1);
			//비동기 요청
			//post로 전송할 데이터 준비
			//post 전송 www-urlencoded
			let urlParams = new URLSearchParams({
				employeeId:0,
				firstName:'길동2',
				lastName:'오2',
				email:'aksdio@aiosd.aspdj',
				hireDate:'2023-10-24'
			});
			
			
			let fecthOptions={
					method:'PUT',
					body: new URLSearchParams(empUpdateData)
			}
			
			try{
				let response = await fetch('/students/4',fecthOptions);
				let data = await response.json();
				
				//data로 이후 비동기 처리
				console.log(data);
			}catch(error){
				console.error(error);
			}
		}
		
		document.querySelector("#btnEmpDelete").onclick = async function(){
			alert(1);
			let fecthOptions={
					method:'DELETE',
					body: new URLSearchParams(empUpdateData)
			}
			
			//비동기 요청
			try{
				let response = await fetch('/students/4',fecthOptions);
				let data = await response.json();
				
				//data로 이후 비동기 처리
				console.log(data);
			}catch(error){
				console.error(error);
			}
		}

	}
	
</script>
</body>
</html>